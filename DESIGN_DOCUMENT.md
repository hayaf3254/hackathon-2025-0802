# 🌍 WorldEnd タスク管理アプリ 設計書

## 📋 目次
1. [概要](#概要)
2. [機能仕様](#機能仕様)
3. [技術仕様](#技術仕様)
4. [UI/UX設計](#uiux設計)
5. [データ構造](#データ構造)
6. [ユーザーマニュアル](#ユーザーマニュアル)
7. [ファイル構成](#ファイル構成)
8. [今後の拡張予定](#今後の拡張予定)

---

## 概要

### 🎯 アプリの目的
**WorldEndタスク管理アプリ**は、課題やタスクの締切を守れない人向けに開発された、ゲーム的要素を持つタスク管理アプリです。

### 🎮 コンセプト
- タスク完了でポイント獲得（+5pt）
- タスク未完了でポイント減少（-10pt）
- ポイントが0になると「世界が崩壊」
- ゲーム要素でモチベーション向上

### 🎨 世界観
- ダークファンタジー風のデザイン
- ポイントに応じて世界の背景が変化
- 滅亡からの復活（リセット）機能

---

## 機能仕様

### 🏠 ホーム画面 (`/home`)
**目的**: メインダッシュボード、タスク管理の中心

**機能**:
- 現在のポイント表示
- 世界の状態表示（平和 → 危機 → 瀕死 → 滅亡）
- 未完了タスク一覧（締切順）
- タスク完了ボタン
- 期限切れタスクの警告表示
- 統計情報（完了・未完了・期限切れ件数）

**ゲーミフィケーション要素**:
- 世界アイコンの変化（🌍 → 🌎 → 🔥 → 💀）
- 背景グラデーションの変化
- ポイント表示のアニメーション

### ➕ タスク作成画面 (`/create`)
**目的**: 新しいタスクの登録

**機能**:
- テキスト入力によるタスク作成
- 画像アップロード + OCR機能（日本語・英語対応）
- 締切日時の設定
- 入力フォームバリデーション

**OCR機能**:
- Tesseract.jsによる文字認識
- 進捗表示付きの処理
- 手書き・印刷文字の両方に対応
- 既存テキストへの追記機能

### 📊 実績画面 (`/result`)
**目的**: タスク履歴と統計の確認

**機能**:
- 3つのタブ構成
  - **概要**: 統計サマリー、完了率
  - **タスク履歴**: 全タスクの詳細履歴
  - **ポイント履歴**: ポイント変化の詳細

**統計情報**:
- 総タスク数、完了数、未完了数、期限切れ数
- 完了率（プログレスバー表示）
- 日別アクティビティ
- ポイント獲得・損失の詳細

---

## 技術仕様

### 🛠️ フロントエンド技術スタック
- **React 19.1.0**: UIライブラリ
- **Vite 7.0.6**: ビルドツール
- **React Router DOM 7.7.1**: ルーティング
- **Tailwind CSS 3.4.0**: スタイリング
- **Lucide React 0.535.0**: アイコンライブラリ
- **Tesseract.js 6.0.1**: OCR機能

### 🏗️ アーキテクチャ
```
Frontend (React SPA)
├── Context API (状態管理)
├── React Router (ルーティング)
├── Custom Hooks (ロジック分離)
└── Component分割設計
```

### 📱 レスポンシブ対応
- **Tailwind CSS**によるモバイルファースト設計
- ブレークポイント: `sm` (640px+), `md` (768px+), `lg` (1024px+)
- グリッドレイアウトによる柔軟な配置

---

## UI/UX設計

### 🎨 デザインシステム

#### カラーパレット
```css
worldEnd: {
  dark: '#1a1a2e',    /* ダークベース */
  purple: '#16213e',  /* パープル */
  blue: '#0f3460',    /* ブルー */
  red: '#e94560',     /* レッド（危険） */
  gold: '#f39c12'     /* ゴールド（ポイント） */
}
```

#### 世界状態別背景
- **Normal**: 青紫のグラデーション（平和）
- **Warning**: オレンジ赤のグラデーション（警告）
- **Critical**: 赤黒のグラデーション（危機）
- **Destroyed**: 黒赤のグラデーション（滅亡）

#### アニメーション
- **pulse-glow**: ポイント表示の脈動エフェクト（2秒間隔）
- **world-collapse**: 世界崩壊時のアニメーション（3秒間）
- **transition-all**: 全体的なスムーズな状態変化

### 🎯 UXの工夫
- **即座のフィードバック**: アクション後の即座な状態変化
- **視覚的警告**: 期限切れタスクの赤色ハイライト
- **進捗の可視化**: OCR処理、完了率のプログレスバー
- **直感的ナビゲーション**: アイコン + テキストの分かりやすいメニュー

---

## データ構造

### 🗃️ State構造（Context API）
```javascript
const initialState = {
  user: {
    id: 'user_001',
    points: 100,              // 初期ポイント
    isWorldDestroyed: false   // 世界状態
  },
  tasks: [                    // タスク配列
    {
      id: 'task_xxx',
      title: 'タスク名',
      due_date: '2025-08-05T23:59:00',
      completed: false,
      completed_at: null,
      created_at: '2025-08-01T12:00:00'
    }
  ],
  worldState: 'normal'        // normal | warning | critical | destroyed
}
```

### 🔄 Actions（状態操作）
- `setTasks(tasks)`: タスク一覧設定
- `addTask(task)`: 新規タスク追加
- `completeTask(taskId)`: タスク完了（+5pt）
- `failTask()`: タスク失敗（-10pt）
- `updatePoints(change)`: ポイント更新
- `destroyWorld()`: 世界滅亡
- `resetWorld()`: 世界リセット（100pt復活）

### 📊 ポイントシステム
```javascript
// ポイント変化の計算
完了: +5pt
失敗: -10pt
最低: 0pt（これ以下にはならない）

// 世界状態の判定
100-50pt: normal   (平和)
50-20pt:  warning  (警告)
20-1pt:   critical (危機)
0pt:      destroyed (滅亡)
```

---

## ユーザーマニュアル

### 🚀 アプリの起動方法
```bash
# プロジェクトディレクトリに移動
cd worldend-task-app

# 依存関係のインストール（初回のみ）
npm install

# 開発サーバー起動
npm run dev

# ブラウザで http://localhost:5173/ にアクセス
```

### 📋 基本的な使い方

#### 1. ホーム画面の見方
- **上部**: アプリタイトル、世界状態メッセージ、現在ポイント
- **中央**: 世界アイコン（状態により変化）
- **下部**: 未完了タスク一覧、統計情報

#### 2. タスクの作成手順
1. 「新しいタスク」ボタンまたはナビゲーションの「タスク作成」をクリック
2. **テキスト入力**：タスク名を直接入力
3. **画像入力**（オプション）：
   - 「クリックして画像をアップロード」エリアをクリック
   - 画像を選択（JPG, PNG, GIF対応）
   - OCR処理完了まで待機（進捗バー表示）
   - 抽出されたテキストが自動入力される
4. **締切設定**：
   - 締切日は必須
   - 締切時間は省略可（省略時は23:59に設定）
5. 「📝 タスクを追加」ボタンをクリック

#### 3. タスクの完了方法
1. ホーム画面でタスクの「完了」ボタンをクリック
2. 即座に+5ポイント獲得
3. タスクが完了済みに変更される

#### 4. 実績の確認方法
1. ナビゲーションの「実績」をクリック
2. 3つのタブで情報確認：
   - **概要**: 全体統計、完了率
   - **タスク履歴**: 個別タスクの詳細
   - **ポイント履歴**: ポイント変化の詳細

### ⚠️ 注意事項

#### ポイントシステム
- タスク完了：**+5ポイント**
- 期限切れ：**-10ポイント**
- ポイントが0になると**世界が滅亡**
- 滅亡後は「世界をリセット」で100ポイントから再開可能

#### OCR機能の注意点
- 日本語・英語の文字認識に対応
- 手書き文字の認識精度は印刷文字より低め
- 画像のサイズが大きいと処理時間が長くなる
- 処理中は他の操作を控える

#### 世界の状態
- **🌍 平和** (100-51pt): 正常状態
- **🌎 警告** (50-21pt): 注意が必要
- **🔥 危機** (20-1pt): 危険状態
- **💀 滅亡** (0pt): 世界終了、リセット必要

---

## ファイル構成

### 📁 プロジェクト構造
```
worldend-task-app/
├── public/                 # 静的ファイル
├── src/
│   ├── components/         # 再利用可能コンポーネント
│   │   └── Header.jsx     # ヘッダー・ナビゲーション
│   ├── pages/             # ページコンポーネント
│   │   ├── Home.jsx       # ホーム画面
│   │   ├── CreateTask.jsx # タスク作成画面
│   │   └── Result.jsx     # 実績画面
│   ├── context/           # 状態管理
│   │   └── UserContext.jsx # ユーザー・タスク状態
│   ├── hooks/             # カスタムフック（未使用）
│   ├── utils/             # ユーティリティ関数（未使用）
│   ├── api/               # API関連（未使用・今後バックエンド連携用）
│   ├── App.jsx            # メインアプリコンポーネント
│   ├── main.jsx           # エントリーポイント
│   └── index.css          # グローバルスタイル
├── package.json           # 依存関係・スクリプト
├── tailwind.config.js     # Tailwind CSS設定
├── postcss.config.js      # PostCSS設定
├── vite.config.js         # Vite設定
└── DESIGN_DOCUMENT.md     # 本設計書
```

### 🔧 設定ファイル詳細

#### tailwind.config.js
- カスタムカラーパレット定義
- アニメーション設定
- キーフレーム定義

#### package.json
- 主要依存関係とDevDependencies
- npm scriptsの定義

---

## 今後の拡張予定

### 🔮 Phase 1: バックエンド連携
- **Express.js + PostgreSQL**との接続
- REST API実装（タスクCRUD、ポイント管理）
- データの永続化

### 🎭 Phase 2: アニメーション強化
- **Lottie**による世界崩壊アニメーション
- より滑らかな状態遷移
- パーティクルエフェクト

### 🏆 Phase 3: ゲーミフィケーション拡張
- バッジ・称号システム
- 達成実績システム
- レベル・経験値の概念

### 📱 Phase 4: 機能拡張
- カテゴリ別タスク管理
- 通知・リマインダー機能
- エクスポート・インポート機能
- ダークモード切り替え

### 🌐 Phase 5: マルチユーザー対応
- ユーザー認証システム
- チーム・グループ機能
- ランキングシステム

---

## 🤝 開発チーム情報

### 担当分担
- **濱野**: フロントエンド（メイン）- React.js実装
- **葉山**: バックエンド（Express）＆ GitHub管理
- **中野**: バックエンド（サポート）
- **斎藤**: React.jsサブフロント担当

### GitHub運用
- **責任者**: 葉山
- **ブランチ戦略**: feature/xxx → develop → main
- **毎朝進捗確認**: 葉山主導

---

## 📞 サポート・問い合わせ

### トラブルシューティング
1. **npm install** でエラーが出る場合
   - Node.js のバージョン確認（18+ 推奨）
   - `npm cache clean --force` 実行

2. **OCR機能が動作しない**
   - ブラウザのJavaScript有効化確認
   - 画像ファイル形式確認（JPG, PNG, GIF）

3. **スタイルが適用されない**
   - Tailwind CSSのビルド確認
   - ブラウザキャッシュクリア

### 開発環境要件
- **Node.js**: 18.0.0 以上
- **npm**: 8.0.0 以上
- **ブラウザ**: Chrome/Firefox/Safari/Edge（最新版）

---

*最終更新: 2025年8月1日*  
*バージョン: 1.0.0* 